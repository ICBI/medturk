<div class="row">

	<h2>{{model.name}}</h2>
	<table class="table table-striped">
	    <tr>
	    	<th>Name</th>
	    	<th>Description</th>
	    	<th>Number of Questions</th>
	    	<th></th>
	    </tr>
	    <tr>
	      <td>{{model.name}}</td>
	      <td>{{model.description}}</td>
	      <td>{{model.questions.length}}</td>
	      <td>
	         <a ng-click="set_tag(tag)" data-target="#model_modal" data-toggle="modal">Edit</a></td>
	      </td>
	    </tr>
	</table>

	<br/>
	<br/>
    <h2>Tags</h2>
	<table style="width: 400px" class="table table-striped">
	    <tr>
	    	<th>Name</th>
	    	<th></th>
	    </tr>

	    <tr ng-repeat="tag in model.tags">
	      <td><span class="label label-default">{{tag.name}}</span></td>
	      <td>
	          <a ng-click="set_tag(tag)" data-target="#tag_modal" data-toggle="modal">Edit</a>&nbsp;&nbsp;&nbsp;<a ng-click="delete_tag(tag._id)">Delete</a></td>
	      </td>
	  </tr>
    </table>
    <div style="width: 250px"  class="input-group">
	    <input type="text" class="form-control" ng-model="tag_name">
	    <span class="input-group-btn">
	      <button class="btn btn-default" type="button" ng-click="add_tag(tag_name)"><b>+</b></button>
	    </span>
	</div>
	<br/>
</div>

	<br/>
	<br/>

<div class="row">

	<table class="table table-striped">
	    <h2>Questions</h2>
	    <tr>
	    	<th>Question</th>
	    	<th>Type</th>
	    	<th>Choices</th>
	    	<th>Tags</th>
	    	<th>Triggers</th>
	    	<th></th>
	    </tr>

	    <tr ng-repeat="question in model.questions">
	      <td>{{question.question}}</td>
	      <td>{{question.type}}</td>
	      <td><span ng-repeat="choice in question.choices">{{choice.name}}, </span></td>
	      <td>
	      	<span ng-repeat="tag_id in question.tag_ids">
	      		<p class="label label-default" >{{get_tag_by_id(tag_id).name}}</p>
	      	</span>
	      </td>
	      <td><span ng-repeat="trigger in question.triggers">{{trigger.name}}, </span></td>
	      <td>
	         <a ng-click="set_question(question)" data-target="#question_modal" data-toggle="modal">Edit</a>&nbsp;&nbsp;&nbsp;<a ng-click="delete_question(question._id, question.name)">Delete</a></td>
	      </td>
	  </tr>
	 </table>
 	<button ng-click="set_question(undefined)" data-target="#question_modal" data-toggle="modal" class="btn btn-default"><b>+</b></button> 
</div>






<!-- Modal for editing model attributes -->
<div class="modal fade" id="model_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Model Editor</h4>
            </div>
            <div class="modal-body">
                  <div class="row">
	                    <h4>Name</h4>
	                    	<input style="width: 400px" type="text" class="form-control" ng-model="model.name"/>
	                    </div>
	                <br/>
                    <br/>
                    <div class="row">
                    	<h4>Description</h4>
    					<textarea style="width: 400px" class="form-control" rows="3" ng-model="model.description"></textarea>
                    </div>
            </div>
            <div class="modal-footer">
                <button id="close" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>











<!-- Modal for editing a tag -->
<div class="modal fade" id="tag_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Tag Editor</h4>
            </div>
            <div class="modal-body">
                  <div class="row">
                      <h4>Name</h4>
                      <input style="width: 400px" type="text" class="form-control" ng-model="tag.name"/>
                    </div>
                    <br/>
                    <br/>
                         
            </div>
            <div class="modal-footer">
                <button id="close" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>









<!-- Modal for question -->
<div class="modal fade" id="question_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Question Editor</h4>
            </div> 
            <div class="modal-body">
                 
                   <div class="row">
                      <h4>Question</h4>
                        <textarea style="width: 400px" class="form-control" rows="2" ng-model="question.question"></textarea>
                    </div>
		           
		           <br/>
		           <br/>
		          
		          	
		            <div class="row">
		            	<h4>Type</h4>
		            	<select ng-model="question.type" style="width: 200px" class="form-control" ng-options="answer_type for answer_type in answer_types"></select>
		        	</div>

		        	<br/>
		        	<br/>


		        	<div class="row" ng-if="question.type == 'radio'">
		        	<h4>Choices</h4>
		        		<table style="width: 400px" class="table table-striped">
						    <tr>
						    	<th>Name</th>
						    	<th></th>
						    </tr>

						    <tr ng-repeat="choice in question.choices">
						    	<td><input style="width: 200px" type="text" class="form-control" ng-model="choice.name"/></td>
						      <td>
						          <a ng-click="delete_choice(choice)">Delete</a></td>
						      </td>
						  </tr>
					    </table>



					    <div style="width: 250px"  class="input-group">
						    <input type="text" class="form-control" ng-model="choice_name">
						    <span class="input-group-btn">
						      <button class="btn btn-default" type="button" ng-click="add_choice(choice_name)">Add Answer</button>
						    </span>
						</div>

						<br/>

					</div>

		        	<br/>
		        	<br/>




		        	<!-- This section is for editing tags -->
		        	<div class="row">
		        	<h4>Tags</h4>
		        		<table style="width: 400px" class="table table-striped">
						    <tr>
						    	<th>Name</th>
						    	<th></th>
						    </tr>

						    <tr ng-repeat="tag_id in question.tag_ids">
						      <td>
						      	<p class="label label-default" >{{get_tag_by_id(tag_id).name}}</p>
						      </td>
						      <td>
						          <a ng-click="remove_tag_id_from_question(question, tag_id)">Delete</a></td>
						      </td>
						  	</tr>
					    </table>
					</div>

					<div class="row">
		            	<p>Add Tag</p>
		            	<select ng-model="tag" style="width: 200px" class="form-control" ng-options="tag.name for tag in model.tags"></select>
		            	<br/>
				      	<button class="btn btn-default" type="button" ng-click="add_tag_to_question(question, tag)">
				      		<b>+</b>
				      </button>
		        	</div>

		        	<br/>
		        	<br/>
		        	<br/>

		      
		           	<div class="row">
		           		<h4>Triggers</h4>


		            	<table class="table table-striped">
						    <tr>
						    	<th>Name</th>
						    	<th>Case Sensitive?</th>
						    	<th></th>
						    </tr>

						    <tr ng-repeat="trigger in question.triggers">
						      <td><input style="width: 200px" type="text" class="form-control" ng-model="trigger.name"/></td>
						      <td>
						      	<select ng-model="trigger.case_sensitive" style="width: 200px" class="form-control" ng-options="option for option in binary"></select>

						      </td>
						      <td>
						          <a ng-click="remove_trigger_from_question(question, $index)">Delete</a></td>
						      </td>
						  </tr>
					   </table>

					   	<div class="input-group">
					    	<span class="input-group-addon">
        						<input ng-model="case_sensitive" type="checkbox">
      						</span>

      						<input ng-model="trigger" type="text" class="form-control">
      						<span class="input-group-btn">
        						<button ng-click="add_trigger(question, trigger)" class="btn btn-default" type="button">+</button>
      						</span>
      					</div>

		        	</div> 

		        	<br/>
		        	<br/>

          </div>
            <div class="modal-footer">
                <button id="close" ng-click="save_question(question)" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

